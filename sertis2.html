<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Лекции</title>
    <style>
.cont{display: flex;}
    </style>
</head>
<body>
    <h1>Лекция 2: Требования безопасности к серверам баз данных. Классы защиты</h1>
    
    <h2>Цель:</h2>
    <p>Сформировать системное понимание угроз безопасности СУБД и выработать практические навыки по их защите на разных уровнях.</p>
    
    <h2>Ключевой тезис:</h2>
    <p>База данных — это «золотой фонд» компании. Её компрометация ведет к катастрофическим последствиям: утечке персональных данных, финансовым потерям, репутационному ущербу и административным штрафам. Безопасность БД — это не «фича», а обязательная базовая функция.</p>

    <h2>Введение: Почему безопасность БД — это важно?</h2>
    
    <h3>1. Ценность данных:</h3>
    <p>БД хранят ПДн, финансовую отчетность, коммерческую тайну, интеллектуальную собственность.</p>
    
    <h3>2. Последствия взлома:</h3>
    <ul>
        <li><strong>Прямые убытки:</strong> Кража денег, штрафы по GDPR, КоАП, PCI DSS</li>
        <li><strong>Репутационные потери:</strong> Утрата доверия клиентов и партнеров</li>
        <li><strong>Операционные потери:</strong> Остановка бизнес-процессов, шантаж (ransomware)</li>
    </ul>

    <h2>Часть 1: Многоуровневая модель безопасности (Defense in Depth)</h2>
    <p>Защита должна быть многослойной, как замок с несколькими дверьми.</p>

    <h3>1. Уровень сети (Network Security)</h3>
    <p><strong>Принцип:</strong> «Спрятать» СУБД от всего мира.</p>
    
    <p><strong>Меры:</strong></p>
    <ul>
        <li><strong>Изоляция:</strong> Размещение БД в отдельном, изолированном сегменте сети (DMZ, VLAN). <strong>Никаких прямых подключений из интернета.</strong></li>
        <li><strong>Firewall (Брандмауэр):</strong>
            <ul>
                <li><strong>Хостый:</strong> iptables (Linux), Windows Firewall</li>
                <li><strong>Сетевой:</strong> Правила, разрешающие входящие подключения <strong>только</strong> с конкретных IP-адресов application-серверов</li>
                <li><strong>Запрет</strong> всех неиспользуемых портов</li>
            </ul>
        </li>
        <li><strong>Шифрование трафика:</strong> Использование SSL/TLS для соединений между приложением и БД. Защита от сниффинга (перехвата тракта)</li>
    </ul>

    <h3>2. Уровень доступа к серверу (Host Security)</h3>
    <p><strong>Принцип:</strong> Укрепить ОС, на которой работает СУБД.</p>
    
    <p><strong>Меры:</strong></p>
    <ul>
        <li><strong>Минимизация поверхности атаки:</strong> Удаление всех ненужных пакетов, служб, отключение неиспользуемых портов</li>
        <li><strong>Своевременное обновление:</strong> Регулярный патчинг ОС и СУБД для устранения известных уязвимостей</li>
        <li><strong>Дисковая шифровка:</strong> Full-disk encryption (e.g., LUKS, BitLocker) для защиты данных на физическом носителе</li>
        <li><strong>Отдельный пользователь ОС:</strong> Запуск СУБД от имени непривилегированного пользователя (не root!)</li>
    </ul>

    <h3>3. Уровень доступа к СУБД (Database Access Control)</h3>
    <p><strong>Принцип:</strong> Аутентификация и авторизация.</p>
    
    <p><strong>Меры:</strong></p>
    <ul>
        <li><strong>Сильные пароли:</strong> Политика сложности паролей, регулярная смена</li>
        <li><strong>Отказ от учетных записей по умолчанию:</strong> Переименование или блокировка root/sa/postgres</li>
        <li><strong>Принцип наименьших привилегий (Least Privilege):</strong> Пользователь/приложение получает ровно те права, которые нужны для работы, и не более
            <ul>
                <li><em>Пример:</em> Пользователю для веб-приложения не нужны права CREATE TABLE, DROP, GRANT OPTION</li>
            </ul>
        </li>
        <li><strong>Разделение обязанностей (SoD):</strong> Администратор БД, администратор безопасности, оператор резервного копирования — должны быть разные люди/учетные записи</li>
    </ul>

    <h3>4. Уровень данных (Data Security)</h3>
    <p><strong>Принцип:</strong> Защита данных даже при компрометации вышележащих уровней.</p>
    
    <p><strong>Меры:</strong></p>
    <ul>
        <li><strong>Шифрование данных:</strong>
            <ul>
                <li><strong>Transparent Data Encryption (TDE):</strong> Шифрование «на лету» на уровне табличного пространства/файлов БД. Защищает от кражи файлов данных</li>
                <li><strong>Шифрование на уровне столбца (Column-level Encryption):</strong> Для особо чувствительных данных (пароли, номера карт)</li>
            </ul>
        </li>
        <li><strong>Маскирование данных (Data Masking):</strong> Для тестовых и сред разработки. Реальные данные заменяются на правдоподобные фиктивные</li>
        <li><strong>Хэширование:</strong> Для хранения паролей <strong>обязательно</strong> использовать современные алгоритмы хэширования с солью (bcrypt, scrypt, Argon2). <strong>Никогда не хранить пароли в открытом виде!</strong></li>
    </ul>

    <h3>5. Уровень аудита и мониторинга (Auditing & Monitoring)</h3>
    <p><strong>Принцип:</strong> Обнаружение и расследование инцидентов.</p>
    
    <p><strong>Меры:</strong></p>
    <ul>
        <li><strong>Включение ведения логов:</strong> Логирование всех попыток входа (успешных и неуспешных), попыток доступа к БД, изменений схемы БД</li>
        <li><strong>Centralized Logging:</strong> Отправка логов на выделенный сервер (лог-сервер) для защиты от модификации злоумышленником</li>
        <li><strong>SIEM-системы:</strong> Использование систем для анализа логов и выявления аномалий (например, 1000 попыток входа за минуту с одного IP)</li>
        <li><strong>Регулярный аудит:</strong> Проверка настроек безопасности, прав пользователей</li>
    </ul>

    <h2>Часть 2: Классы защиты / Стандарты безопасности (Security Standards)</h2>
    <p>Это формализованные требования, которые предъявляются к системам в зависимости от важности обрабатываемых данных.</p>

    <h3>Стандарты и их требования к БД:</h3>
    
    <h4>ФСТЭК России (Приказы № 21, 31, 239)</h4>
    <ul>
        <li><strong>Сфера применения:</strong> Защита информации в ГИС (гос. информационных системах)</li>
        <li><strong>Ключевые требования к БД:</strong>
            <ul>
                <li><strong>КЗ1 (самый высокий):</strong> Аудит всех событий безопасности</li>
                <li>Мандатное управление доступом (МСВ)</li>
                <li>Визуальная изоляция данных разных уровней конфиденциальности</li>
                <li>Сертифицированные СЗИ</li>
            </ul>
        </li>
    </ul>

    <h4>152-ФЗ «О персональных данных»</h4>
    <ul>
        <li><strong>Сфера применения:</strong> Любые операторы, обрабатывающие ПДн граждан РФ</li>
        <li><strong>Ключевые требования к БД:</strong>
            <ul>
                <li>Шифрование ПДн при передаче и хранении</li>
                <li>Разграничение прав доступа</li>
                <li>Учет и хранение машинных носителей</li>
                <li>Обнаружение вторжений</li>
            </ul>
        </li>
    </ul>

    <h4>PCI DSS (Payment Card Industry)</h4>
    <ul>
        <li><strong>Сфера применения:</strong> Организации, работающие с банковскими картами</li>
        <li><strong>Ключевые требования к БД:</strong>
            <ul>
                <li>Шифрование данных картодержателей (CHD)</li>
                <li>Защита от SQL-инъекций</li>
                <li>Строгое управление доступом</li>
                <li>Регулярное тестирование систем</li>
            </ul>
        </li>
    </ul>

    <h4>GDPR (General Data Protection Regulation)</h4>
    <ul>
        <li><strong>Сфера применения:</strong> Любые компании, обрабатывающие ПДн граждан ЕС</li>
        <li><strong>Ключевые требования к БД:</strong>
            <ul>
                <li>Privacy by Design (защита на этапе проектирования)</li>
                <li>Минимизация данных (хранить только необходимое)</li>
                <li>Уведомление о утечках в течение 72 часов</li>
            </ul>
        </li>
    </ul>

    <h4>ISO/IEC 27001</h4>
    <ul>
        <li><strong>Сфера применения:</strong> Международный стандарт системы менеджмента информационной безопасности (СМИБ)</li>
        <li><strong>Ключевые требования к БД:</strong>
            <ul>
                <li>Системный подход к управлению рисками</li>
                <li>Постоянное улучшение (цикл PDCA)</li>
                <li>Документирование политик и процедур</li>
            </ul>
        </li>
    </ul>

    <h2>Практические выводы и checklist</h2>
    
    <ol>
        <li><input type="checkbox"> Изолируйте сервер БД от интернета</li>
        <li><input type="checkbox"> Настройте firewall для white-listing IP-адресов application-серверов</li>
        <li><input type="checkbox"> Обновляйте ОС и СУБД регулярно</li>
        <li><input type="checkbox"> Запретите/смените пароли учетных записей по умолчанию</li>
        <li><input type="checkbox"> Создавайте отдельных пользователей для каждого приложения с минимальными правами</li>
        <li><input type="checkbox"> Включайте шифрование (TDE) и SSL/TLS для соединений</li>
        <li><input type="checkbox"> Хэшируйте пароли с помощью bcrypt/Argon2</li>
        <li><input type="checkbox"> Включайте логирование и настройте мониторинг подозрительной активности</li>
        <li><input type="checkbox"> Регулярно делайте бэкапы и тестируйте их восстановление</li>
        <li><input type="checkbox"> Проводите регулярный аудит безопасности (например, с помощью сканеров уязвимостей)</li>
    </ol>

    <h2>Итог:</h2>
    <p>Безопасность БД — это непрерывный процесс, а не разовое действие. Она требует комплексного подхода, покрывает все уровни: от физического до уровня приложений, и должна быть основана на принципах «запрещено всё, что не разрешено явно» и «минимум привилегий».</p>
</body>
</html>